(()=>{"use strict";var e,t={254:(e,t,s)=>{var i=s(440),a=s.n(i),h=s(281);class o extends a().Scene{constructor(){super("PlayScene")}create(){const{height:e,width:t}=this.game.config;this.gameSpeed=9.5,this.isGameRunning=!1,this.respawnTime=0,this.score=0,this.energy=100,this.ironOverload=0,this.energyDecayRate=.009,this.ironIncreaseRate=10,this.ironDecreaseRate=15,this.lastObstacleSpawn=0,this.lastBloodSpawn=0,this.lastMedicineSpawn=0,this.jumpSound=this.sound.add("jump",{volume:.2}),this.hitSound=this.sound.add("hit",{volume:.2}),this.reachSound=this.sound.add("reach",{volume:.2}),this.startTrigger=this.physics.add.sprite(0,10).setOrigin(0,1).setImmovable(),this.sky=this.add.tileSprite(0,e-18,1,e+250,"sky").setOrigin(0,1),this.ground=this.add.tileSprite(0,e,88,26,"ground").setOrigin(0,1),this.boy=this.physics.add.sprite(0,e,"boy-idle").setCollideWorldBounds(!0).setGravityY(5e3).setBodySize(88,90).setDepth(1).setOrigin(0,1),this.scoreText=this.add.text(t,0,"00000",{fill:"#535353",font:"900 35px Courier",resolution:5}).setOrigin(1,0).setAlpha(0),this.highScoreText=this.add.text(0,0,"00000",{fill:"#535353",font:"900 35px Courier",resolution:5}).setOrigin(1,0).setAlpha(0),this.environment=this.add.group(),this.environment.addMultiple([this.add.image(t/2,170,"cloud"),this.add.image(t-80,80,"cloud"),this.add.image(t/1.3,100,"cloud")]),this.environment.setAlpha(0),this.gameOverScreen=this.add.container(t/2,e/2-50).setAlpha(0),this.gameStartScreen=this.add.container(t/2,e/2-50),this.gameOverText=this.add.image(0,0,"game-over"),this.gameTitleText=this.add.image(0,0,"title"),this.gameStartText=this.add.image(0,50,"start"),this.restart=this.add.image(0,80,"restart").setInteractive(),this.gameStartScreen.add([this.gameTitleText,this.gameStartText]),this.gameOverScreen.add([this.gameOverText,this.restart]),this.energy=100,this.energyBar=this.add.graphics(),this.obsticles=this.physics.add.group(),this.bloods=this.physics.add.group(),this.medicines=this.physics.add.group(),this.warningText=this.add.text(t/2,80,"IRON OVERLOADED",{font:"900 35px Courier",fill:"#FF0000",stroke:"#000000",strokeThickness:2,resolution:5}).setOrigin(.5).setAlpha(0);const s=new(a().Display.Color)(255,0,0),i=new(a().Display.Color)(255,165,0),h={value:0};this.tweens.add({targets:h,value:1,ease:"Sine.easeInOut",duration:750,yoyo:!0,repeat:-1,onUpdate:()=>{const e=h.value,t=a().Math.Interpolation.Linear([s.red,i.red],e),o=a().Math.Interpolation.Linear([s.green,i.green],e),r=a().Math.Interpolation.Linear([s.blue,i.blue],e),n="#"+new(a().Display.Color)(t,o,r).color.toString(16).padStart(6,"0").toUpperCase();this.warningText.setFill(n)}}),this.initAnims(),this.initStartTrigger(),this.initColliders(),this.handleInputs(),this.handleScore()}updateEnergyBar(){const{width:e}=this.game.config,t=200,s=e/2-100;this.energyBar.clear(),this.energyBar.fillStyle(3355443),this.energyBar.fillRect(s,30,t,20);let i=65280;this.energy>100?(i=16711680,this.warningText.setAlpha(1)):this.energy<30?(i=16753920,this.warningText.setAlpha(0)):(i=65280,this.warningText.setAlpha(0)),0==this.energy&&this.gameOver();const h=a().Math.Clamp(this.energy,0,100);this.energyBar.fillStyle(i),this.energyBar.fillRect(s,30,h/100*t,20),this.energyBar.lineStyle(2,16777215),this.energyBar.strokeRect(s,30,t,20)}gameOver(){this.highScoreText.x=this.scoreText.x-this.scoreText.width-20;const e=this.highScoreText.text.substr(this.highScoreText.text.length-5),t=Number(this.scoreText.text)>Number(e)?this.scoreText.text:e;this.highScoreText.setText("HI "+t),this.highScoreText.setAlpha(1),this.physics.pause(),this.isGameRunning=!1,this.anims.pauseAll(),this.boy.setTexture("boy-hurt"),this.respawnTime=0,this.gameSpeed=5,this.gameOverScreen.setAlpha(1),this.score=0,this.energy=100,this.hitSound.play()}initColliders(){this.physics.add.collider(this.boy,this.obsticles,()=>{this.gameOver()},null,this),this.physics.add.overlap(this.boy,this.bloods,(e,t)=>{t.destroy(),this.energy+=30,this.updateEnergyBar()}),this.physics.add.overlap(this.boy,this.medicines,(e,t)=>{t.destroy(),this.energy>100&&(this.energy=100),this.updateEnergyBar()})}initStartTrigger(){const{width:e,height:t}=this.game.config;this.physics.add.overlap(this.startTrigger,this.boy,()=>{if(10===this.startTrigger.y)return void this.startTrigger.body.reset(0,t);this.startTrigger.disableBody(!0,!0);const s=this.time.addEvent({delay:1e3/60,loop:!0,callbackScope:this,callback:()=>{this.gameStartScreen.setAlpha(0),this.boy.setVelocityX(80),this.boy.play("boy-run",1),this.ground.width<e&&(this.ground.width+=34,this.sky.width+=34),this.ground.width>=1e3&&(this.ground.width=e,this.sky.width=e,this.isGameRunning=!0,this.updateEnergyBar(),this.boy.setVelocityX(0),this.scoreText.setAlpha(1),this.environment.setAlpha(1),this.warningText.setAlpha(0),s.remove())}})},null,this)}initAnims(){this.anims.create({key:"boy-run",frames:this.anims.generateFrameNumbers("boy",{start:0,end:1}),frameRate:8,repeat:-1})}handleScore(){this.time.addEvent({delay:100,loop:!0,callbackScope:this,callback:()=>{if(!this.isGameRunning)return;this.score++,this.gameSpeed+=.01,this.score%100==0&&(this.reachSound.play(),this.tweens.add({targets:this.scoreText,duration:100,repeat:3,alpha:0,yoyo:!0}));const e=Array.from(String(this.score),Number);for(let t=0;t<5-String(this.score).length;t++)e.unshift(0);this.scoreText.setText(e.join(""))}})}restartGame(){this.boy.setVelocityY(0),this.boy.body.height=92,this.boy.body.offset.y=0,this.physics.resume(),this.obsticles.clear(!0,!0),this.bloods.clear(!0,!0),this.isGameRunning=!0,this.gameOverScreen.setAlpha(0),this.anims.resumeAll()}handleInputs(){this.restart.on("pointerdown",()=>{this.restartGame()}),this.input.keyboard.on("keydown",()=>{this.isGameRunning||1!==this.gameOverScreen.alpha||this.restartGame()}),this.input.keyboard.on("keydown-SPACE",()=>{!this.boy.body.onFloor()||this.boy.body.velocity.x>0||(this.jumpSound.play(),this.boy.body.height=92,this.boy.body.offset.y=0,this.boy.setVelocityY(-1600))}),this.input.keyboard.on("keydown-DOWN",()=>{this.boy.body.onFloor()&&this.isGameRunning&&(this.boy.body.height=58,this.boy.body.offset.y=34)}),this.input.keyboard.on("keyup-DOWN",()=>{(0===this.score||this.isGameRunning)&&(this.boy.body.height=92,this.boy.body.offset.y=0)}),this.input.on("pointerdown",()=>{this.isGameRunning||1!==this.gameOverScreen.alpha||this.restartGame(),this.boy.body.onFloor()&&(this.jumpSound.play(),this.boy.body.height=92,this.boy.body.offset.y=0,this.boy.setVelocityY(-1600))})}placeObsticle(){const e=Math.floor(7*Math.random())+1,t=a().Math.Between(600,900);let s;e>4||(s=this.obsticles.create(this.game.config.width+t,this.game.config.height-18,`obsticle-${e}`).setOrigin(0,1),s.body.offset.y=10,s.setImmovable())}placeBlood(){if(a().Math.Between(0,100)>70)return;const e=a().Math.Between(600,1200),t=this.bloods.create(this.game.config.width+e,this.game.config.height-30,"blood").setOrigin(0,1);t.setImmovable(),t.body.setAllowGravity(!1)}placeMedicine(){if(a().Math.Between(0,100)>80)return;const e=a().Math.Between(1500,2500),t=this.medicines.create(this.game.config.width+e,this.game.config.height-20,"meds").setOrigin(0,1);t.setImmovable(),t.body.setAllowGravity(!1)}update(e,t){if(!this.isGameRunning)return;this.ground.tilePositionX+=this.gameSpeed,a().Actions.IncX(this.obsticles.getChildren(),-this.gameSpeed),a().Actions.IncX(this.bloods.getChildren(),-this.gameSpeed),a().Actions.IncX(this.medicines.getChildren(),-this.gameSpeed),a().Actions.IncX(this.environment.getChildren(),-.5),this.energy-=t*this.energyDecayRate,this.energy=a().Math.Clamp(this.energy,0,120),this.updateEnergyBar(),this.energy<40||this.energy>100?this.gameSpeed=8:this.energy<20?this.gameSpeed=7:this.gameSpeed=9.5;const{width:s}=this.game.config,i=this.gameSpeed*t*.08;this.lastObstacleSpawn+=i,this.lastBloodSpawn+=i,this.lastMedicineSpawn+=i,this.lastObstacleSpawn>a().Math.Between(600,900)&&(this.placeObsticle(),this.lastObstacleSpawn=0),this.lastBloodSpawn>a().Math.Between(500,1e3)&&(this.placeBlood(),this.lastBloodSpawn=0),this.lastMedicineSpawn>a().Math.Between(1500,2500)&&(this.placeMedicine(),this.lastMedicineSpawn=0),this.obsticles.getChildren().forEach(e=>{e.getBounds().right<0&&this.obsticles.killAndHide(e)}),this.bloods.getChildren().forEach(e=>{e.getBounds().right<0&&this.bloods.killAndHide(e)}),this.environment.getChildren().forEach(e=>{e.getBounds().right<0&&(e.x=this.game.config.width+30)}),this.boy.play("boy-run",1)}}const r=o;class n extends a().Scene{constructor(){super("PreloadScene")}preload(){this.load.font("8bit","assets/8-bit-hud.ttf"),this.load.audio("jump","assets/jump.m4a"),this.load.audio("hit","assets/hit.m4a"),this.load.audio("reach","assets/reach.m4a"),this.load.image("title","assets/title.png"),this.load.image("start","assets/start.png"),this.load.image("ground","assets/ground.png"),this.load.image("overloaded","assets/overloaded.png"),this.load.image("boy-idle","assets/boy-idle.png"),this.load.image("boy-hurt","assets/boy-hurt.png"),this.load.image("restart","assets/restart.png"),this.load.image("game-over","assets/game-over.png"),this.load.image("cloud","assets/cloud.png"),this.load.image("sky","assets/sky.png"),this.load.image("blood","assets/blood_droplet.png"),this.load.image("meds","assets/medicine.png"),this.load.spritesheet("boy","assets/boy-run.png",{frameWidth:90,frameHeight:90}),this.load.spritesheet("enemy-bird","assets/enemy-bird.png",{frameWidth:92,frameHeight:77}),this.load.image("obsticle-1","assets/obstacles-1.png"),this.load.image("obsticle-2","assets/obstacles-2.png"),this.load.image("obsticle-3","assets/obstacles-3.png"),this.load.image("obsticle-4","assets/obstacles-4.png")}create(){this.scene.start("PlayScene")}}const d=n,l={type:a().AUTO,parent:"game-container",height:340,pixelArt:!0,transparent:!0,physics:{default:"arcade",arcade:{debug:!1}},plugins:{global:[{key:"FontPlugin",plugin:h.F,start:!0}]},scene:[d,r]};window.addEventListener("load",()=>{console.log("Starting Phaser game..."),new(a().Game)(l)})}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var h=s[e]={exports:{}};return t[e].call(h.exports,h,h.exports,i),h.exports}i.m=t,e=[],i.O=(t,s,a,h)=>{if(!s){var o=1/0;for(l=0;l<e.length;l++){for(var[s,a,h]=e[l],r=!0,n=0;n<s.length;n++)(!1&h||o>=h)&&Object.keys(i.O).every(e=>i.O[e](s[n]))?s.splice(n--,1):(r=!1,h<o&&(o=h));if(r){e.splice(l--,1);var d=a();void 0!==d&&(t=d)}}return t}h=h||0;for(var l=e.length;l>0&&e[l-1][2]>h;l--)e[l]=e[l-1];e[l]=[s,a,h]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={524:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,h,[o,r,n]=s,d=0;if(o.some(t=>0!==e[t])){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(n)var l=n(i)}for(t&&t(s);d<o.length;d++)h=o[d],i.o(e,h)&&e[h]&&e[h][0](),e[h]=0;return i.O(l)},s=self.webpackChunkthalassemia_run=self.webpackChunkthalassemia_run||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=i.O(void 0,[121],()=>i(254));a=i.O(a)})();